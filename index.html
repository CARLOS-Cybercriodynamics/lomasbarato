<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="LoMÃ¡sBarato.mx - Encuentra el precio mÃ¡s bajo en MÃ©xico de Amazon, Walmart, Soriana, Chedraui y Mercado Libre en tiempo real"/>
  <title>LoMÃ¡sBarato.mx - El precio mÃ¡s barato en MÃ©xico</title>
  
  <!-- Bootstrap + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
     crossorigin="anonymous"></script>

  <style>
    :root {
      --primary: #0d6efd;
      --success: #198754;
    }
    body { font-family: system-ui, -apple-system, sans-serif; }
    .skeleton {
      background: #e0e0e0;
      border-radius: 12px;
      animation: pulse 1.5s ease-in-out infinite;
    }
    @keyframes pulse {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
    }
    .deal-card {
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .deal-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.15) !important;
    }
    .price-best {
      font-size: 1.4rem;
      font-weight: 900;
      color: var(--success);
    }
    img {
      image-rendering: -webkit-optimize-contrast;
    }
  </style>
</head>
<body class="bg-light">

  <header class="bg-primary text-white text-center py-4">
    <h1 class="display-5 fw-bold">LoMÃ¡sBarato.mx</h1>
    <p class="lead mb-3">Amazon â€¢ Walmart â€¢ Soriana â€¢ Chedraui â€¢ Mercado Libre</p>
    <div class="w-100 px-3" style="max-width: 500px; margin: 0 auto;">
      <input type="text" id="search" class="form-control form-control-lg rounded-pill shadow" 
             placeholder="ðŸ” Busca arroz, leche, iPhone, TV..." autofocus>
    </div>
  </header>

  <div class="container my-5">
    <div id="results" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"></div>
    
    <div id="loading" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      <!-- 9 skeletons mientras carga -->
      <div class="col"><div class="card skeleton h-100"><div class="card-body"><div class="skeleton w-100" style="height:200px;"></div><div class="skeleton mt-3" style="height:20px;width:80%;"></div><div class="skeleton mt-2" style="height:30px;width:60%;"></div></div></div></div>
      <div class="col"><div class="card skeleton h-100"><div class="card-body"><div class="skeleton w-100" style="height:200px;"></div><div class="skeleton mt-3" style="height:20px;width:80%;"></div><div class="skeleton mt-2" style="height:30px;width:60%;"></div></div></div></div>
      <div class="col"><div class="card skeleton h-100"><div class="card-body"><div class="skeleton w-100" style="height:200px;"></div><div class="skeleton mt-3" style="height:20px;width:80%;"></div><div class="skeleton mt-2" style="height:30px;width:60%;"></div></div></div></div>
      <!-- Repite 6 veces mÃ¡s si quieres -->
    </div>

    <div id="no-results" class="text-center py-5 d-none">
      <h3 class="text-muted">No encontramos ese producto aÃºn ðŸ˜…</h3>
      <p class="lead">Prueba con: arroz, aceite, leche, papel higiÃ©nico, iPhone 15, TV 55...</p>
    </div>
  </div>

  <!-- Banner AdSense -->
  <div class="container text-center my-5">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
         data-ad-slot="1234567890"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
  <script>
    // TU BASE DE DATOS DE PRECIOS (actualÃ­zala cada vez que scrapees)
    const cdn = "https://images.weserv.nl/?url=https://raw.githubusercontent.com/CARLOS-Cybercriodynamics/lomasbarato/main/deals/";
      {
        nombre: "Arroz Sos 1kg",
        imagen: "arroz-sos.jpg",
        precios: [
          { tienda: "Walmart", precio: 24.50, link: "https://www.walmart.com.mx/..." },
          { tienda: "Soriana", precio: 25.90, link: "https://www.soriana.com/..." },
          { tienda: "Amazon", precio: 28.00, link: "https://amzn.to/..." }
        ]
      },
      {
        nombre: "Aceite Nutrioli 1L",
        imagen: "aceite-nutrioli.jpg",
        precios: [
          { tienda: "Chedraui", precio: 32.90, link: "#" },
          { tienda: "Walmart", precio: 34.50, link: "#" }
        ]
      },
      {
        nombre: "iPhone 15 128GB Negro",
        imagen: "iphone15-negro.jpg",
        precios: [
          { tienda: "Liverpool", precio: 18999, link: "#" },
          { tienda: "Amazon", precio: 17999, link: "#" },
          { tienda: "Mercado Libre", precio: 17499, link: "#" }
        ]
      }
      // AGREGA TODOS TUS 100+ PRODUCTOS AQUÃ
    ];

    const fuse = new Fuse(productos, {
      keys: ['nombre'],
      threshold: 0.3,
      includeScore: true
    });

    const productos = [
        {
          nombre: "Arroz SOS Grano Grueso 1 kg",
          imagen: "https://m.media-amazon.com/images/I/71e3vZ0Z9QL._AC_SL1500_.jpg",
          precios: [
            { tienda: "Walmart", precio: 24.50, link: "https://www.walmart.com.mx" },
            { tienda: "Soriana", precio: 25.90, link: "https://www.soriana.com" },
            { tienda: "Amazon", precio: 28.00, link: "https://www.amazon.com.mx" }
          ]
        },
        {
          nombre: "Leche Lala Entera 1 Litro",
          imagen: "https://m.media-amazon.com/images/I/61+XvX+2rEL._AC_SL1200_.jpg",
          precios: [
            { tienda: "Chedraui", precio: 22.50, link: "https://www.chedraui.com.mx" },
            { tienda: "Walmart", precio: 23.00, link: "https://www.walmart.com.mx" }
          ]
        },
        {
          nombre: "Aceite Nutrioli Puro de Soya 1L",
          imagen: "https://m.media-amazon.com/images/I/81XgV8dXqRL._AC_SL1500_.jpg",
          precios: [
            { tienda: "Soriana", precio: 32.90, link: "https://www.soriana.com" },
            { tienda: "Amazon", precio: 35.00, link: "https://www.amazon.com.mx" }
          ]
        },
        {
          nombre: "iPhone 15 128GB Negro",
          imagen: "https://m.media-amazon.com/images/I/71fJ0UR74CL._AC_SL1500_.jpg",
          precios: [
            { tienda: "Mercado Libre", precio: 17499, link: "https://www.mercadolibre.com.mx" },
            { tienda: "Amazon", precio: 17999, link: "https://www.amazon.com.mx" }
          ]
        },
        {
          nombre: "Papel HigiÃ©nico Regio Rinde MÃ¡s 12 rollos",
          imagen: "https://m.media-amazon.com/images/I/71kZ7Z7Z7ZL._AC_SL1500_.jpg",
          precios: [
            { tienda: "Walmart", precio: 89.00, link: "https://www.walmart.com.mx" }
          ]
        },
        {
          nombre: "TV Samsung 55\" Crystal UHD 4K",
          imagen: "https://m.media-amazon.com/images/I/71BVGh7OpPL._AC_SL1500_.jpg",
          precios: [
            { tienda: "Liverpool", precio: 10999, link: "https://www.liverpool.com.mx" },
            { tienda: "Amazon", precio: 10499, link: "https://www.amazon.com.mx" }
          ]
        }
      ];

      function renderCards(items) {
        const results = document.getElementById("results");
        results.innerHTML = "";
        
        if (items.length === 0) {
          document.getElementById("no-results").classList.remove("d-none");
          return;
        }

        items.forEach(p => {
          const mejor = p.precios.reduce((min, cur) => cur.precio < min.precio ? cur : min);
          
          const card = document.createElement("div");
          card.className = "col";
          card.innerHTML = `
            <div class="card deal-card h-100 shadow-sm border-0 rounded-3 overflow-hidden">
              <picture>
                <source srcset="${p.imagen}?w=600&output=webp" type="image/webp">
                <source srcset="${p.imagen}?w=600" type="image/jpeg">
                <img src="${p.imagen}?w=600" 
                     alt="${p.nombre} - Mejor precio en MÃ©xico" 
                     class="card-img-top" 
                     loading="lazy" 
                     decoding="async"
                     width="600" 
                     height="450"
                     style="object-fit: cover; height: 200px;">
              </picture>
              <div class="card-body d-flex flex-column">
                <h5 class="card-title fw-bold">${p.nombre}</h5>
                <div class="mt-auto">
                  <p class="price-best mb-2">$${mejor.precio.toLocaleString('es-MX')} <small class="text-success fw-bold">${mejor.tienda}</small></p>
                  <a href="${mejor.link}" target="_blank" class="btn btn-success w-100">
                    Ir a la oferta
                  </a>
                </div>
              </div>
            </div>
          `;
          results.appendChild(card);
        });
      }

      // BÃºsqueda en tiempo real
      document.getElementById("search").addEventListener("input", (e) => {
        const query = e.target.value.trim();
        document.getElementById("loading").classList.add("d-none");
        document.getElementById("no-results").classList.add("d-none");
        
        if (query === "") {
          renderCards(productos.slice(0, 30));
          return;
        }
        
        const resultados = fuse.search(query).map(r => r.item);
        renderCards(resultados);
      });

      // Carga inicial
      setTimeout(() => {
        document.getElementById("loading").classList.add("d-none");
        renderCards(productos);
      }, 800);
    </script>
  </body>
</html>
